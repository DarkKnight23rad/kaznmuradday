<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–ü–∞–Ω–µ–ª—å –≤–µ–¥—É—â–µ–≥–æ</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
  <h2>üë®‚Äçüè´ –ü–∞–Ω–µ–ª—å –≤–µ–¥—É—â–µ–≥–æ</h2>
  <p>–û–±—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:</p>

  <table id="leaderboard" style="margin:0 auto;border-collapse:collapse;">
    <thead>
      <tr><th>–ò–º—è</th><th>–û—á–∫–∏</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <hr style="margin: 30px 0;">

  <h3>üìò –í–æ–ø—Ä–æ—Å—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:</h3>
  <div id="questions"></div>
</div>

<script>
// –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
async function updateLeaderboard() {
  const response = await fetch("/get_leaderboard");
  const data = await response.json();
  const tbody = document.querySelector("#leaderboard tbody");
  tbody.innerHTML = "";
  data.forEach(row => {
    tbody.innerHTML += `<tr><td>${row.name}</td><td>${row.score}</td></tr>`;
  });
}

// –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
async function loadQuestions() {
  const response = await fetch("/get_questions");
  const questions = await response.json();
  const qDiv = document.getElementById("questions");
  qDiv.innerHTML = "";
  questions.forEach((q, index) => {
    let opts = q.options.map(o => `<li>${o}</li>`).join("");
    qDiv.innerHTML += `<div style="text-align:left;margin-bottom:15px;">
      <b>${index+1}. ${q.question}</b>
      <ul>${opts}</ul>
      <p style="color:#ffea00;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${q.answer}</p>
    </div>`;
  });
}

updateLeaderboard();
loadQuestions();
setInterval(updateLeaderboard, 3000); // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
</script>
</body>
</html>
